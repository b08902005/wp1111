# Web Programming HW#2

此次實現的新功能多在 main.js 中介紹，前面是對之前檔案的微調以及新加入的 class 等。在最下面的 TODO list 中我有標出每個基礎、進階功能用什麼方式實現，在前面的 main.js 章節中有較詳細介紹。

## index.html
此部分基本上依照 hw1，除了幾乎沒有影響的微調外，主要加入以下幾點：
1. window class：用以標記每個聊天者視窗(左右皆有標記)。
2. myself class：標記使用者本身的視窗(之後使用者位置改變會跟著切換，最一開始默認將使用者釘選在左)。
3. time id：把顯示現在時間的 span 加上 id。
4. btnRight class：非釘選視窗中間會浮現出的橢圓按鈕組皆加入此 class。
5. btnLeft：釘選視窗中間會浮現出的橢圓按鈕組加入此 class。
 
## styles.css
對hw1中已存在的部分修改極少，主要加入以下幾種selector對應的樣式：
1. button：close button 和 plus button，前者關閉與會者的小視窗，後者用於增加與會者。
2. 左區和右區的排版：hide 和 noLeft，處理取消釘選時的狀況也可處理物件的隱藏。
3. 小視窗的排版：多個格式為 {left/right}-{number} 的 class，處理無被釘選視窗/有被釘選視窗在非釘選視窗數量為 number 時，所有視窗的排版。
4. 修改一點未釘選視窗 hover 相關。

## main.js
設計重要變數 numRight 表示目前存在的非釘選視窗數量、leftExist 表示左邊是否有已釘選視窗，其他部分依實現功能分別介紹：
### 隨機顏色頭像
1. makeRandColor()：隨機生成用 rgb 編碼的顏色。
2. 用前述 function 為所有人視窗中的圈圈賦予背景顏色
3. 原本圈圈中應該放頭像，但考慮到在加人進來的功能中，若要導入頭像，必須要求使用者上傳 url 碼，不僅麻煩且和一般 google meet 的操作相差太大，所以我採用 google 另一種常見的解決方式，在與會者加入時為他隨機生成顏色作為頭像，在此人退出聊天室或刷新網頁前，該顏色固定。我用 background 實現顏色的賦值，所以想把頭像背景切換成 url 也相當容易。

### close button
為每個視窗創建紅色叉叉型的關閉按鈕，在包含 myself class 的視窗中將此按鈕隱藏，點選此按鈕會關閉該視窗並重新排版剩下部分。

### 非釘選視窗按鈕組 ( btnRight )
點選非釘選視窗中間浮現的橢圓按鈕組，可將它釘選到左，分兩種情況：
1. 目前有被釘選視窗：兩邊交換名字、頭像顏色這兩項資訊。
2. 目前無被釘選視窗：釘選到左後對右邊重新排版。

### 釘選視窗按鈕組 ( btnLeft )
點選釘選視窗中間浮現的橢圓按鈕組，可將它取消釘選：
1. 創建新的視窗元素：以之前已存在的視窗為模板創建新元素。
2. 執行和 非釘選視窗按鈕組 中 2. 類似的操作。

### reLayout() function
主要根據目前是否有釘選項目以及非釘選視窗的數量，為視窗們切換 class，在 1~15 個與會者時皆可成功排版。

### time
用 setInterval() 每 30 秒去抓一次當前時間並顯示在 id 設為 time 的 span 中(會判斷上午、下午、晚上)，例如："下午12點27分"。

### plus button
加入新與會者功能，按鈕放在掛斷通話的按鈕右側，點擊後會用 prompt 跳出對話視窗要求輸入新與會者的名字 (message = "Enter new person's name:")，若輸入長度至少為 1 的字串後點選確定，就會加入一個新的以此字串為名的與會者視窗。

## TODO list 檢查

- 基本功能
	- [x] 六位與會者，"你"被釘選在左，剩下五位排在右側邊欄。
	- [x] 移除與會者功能：點擊左上角的紅叉按鈕，自己的視窗無此按鈕 → 用 close button 和 myself class 實現
	- [x] 關閉某視窗後重新排列 → 用 reLayout() 實現
	- [x] 游標進入(hover)某個與會者的⼩視窗時，中間的圓浮現以半透明的橢圓包裹的三個功能按鈕，⽽游標進入此橢圓時，則此橢圓形的透明度降低 → 在作業一時我已實現此功能，用和已釘選視窗浮現按鈕相似的作法，在 style.css 中微調過
	- [x] 點選未釘選視窗的橢圓，將此與會者和⽬前的主視窗與會者交換位置 → 在 btnRight 1. 中實現
	- [x] 游標點擊已釘選視窗圓圈中的橢圓時，關閉主視窗，且將已釘選視窗上的與會者加入其他的與會者，重新排列 → 在 btnLeft 和 reLayout() 中實現
	- [x] ⽬前無人被釘選，點擊某位與會者頭像上的橢圓，則會出現主視窗，將此與會者釘選在此，⽽其他與會者則排列在側邊欄 → 在 btnRight 2. 中實現
	- [x] 踢出所有的與會者，只剩下⾃⼰時，則⾃⼰應佔滿整個視窗 → 用 reLayout() 和 hide class 實現
- 進階功能
	- [x] ⽀援⼀開始使⽤者個數介於 [1, 15] 之間的任意整數 → 用 reLayout() 實現，這裡默認設定為 6 位與會者，可以直接在 index.html 中加入格式相同的元素或用加入新與會者功能進行測試。
	- [x] 不管是側邊欄還是整個視窗，在排列與會者的⼩視窗時，考慮到⼩視窗長寬比例的動態調整，當最下⾯⼀排的⼩視窗個數較少時，適當的加長其寬度 → 用 flexbox 和 reLayout() 實現
	- [x] 放置"加入與會者按鈕"(我用更符合功能的按鈕 icon 樣式)，當滑鼠點擊它時，可新增與會者視窗(須自己輸入姓名) → 用 plus button 實現
	- [x] 左下⾓的時間顯⽰⽬前正確的時間 → 在 time 中用 setInterval 實現

我已實現所有基本和進階功能的實作。